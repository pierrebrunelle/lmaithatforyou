<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Let Me ChatGPT That For You</title>
    <style>
        :root {
            --primary-color: #10a37f;
            --secondary-color: #0f8a6c;
            --bg-color: #f9f9f9;
            --text-color: #333;
            --chat-bg: #ffffff;
            --animation-speed: 0.5s;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: #555;
        }
        
        .search-container {
            position: relative;
            margin-bottom: 2rem;
        }
        
        .search-box {
            width: 100%;
            padding: 1rem;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 30px;
            outline: none;
            transition: border 0.3s ease;
        }
        
        .search-box:focus {
            border-color: var(--primary-color);
        }
        
        .search-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            font-size: 1.1rem;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 1rem;
            transition: background-color 0.3s ease;
        }
        
        .search-button:hover {
            background-color: var(--secondary-color);
        }
        
        .chat-container {
            width: 100%;
            height: 400px;
            background-color: var(--chat-bg);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-top: 2rem;
            overflow: hidden;
            position: relative;
            text-align: left;
            display: none;
        }
        
        .chat-header {
            display: flex;
            align-items: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }
        
        .chat-logo {
            width: 30px;
            height: 30px;
            background-color: var(--primary-color);
            border-radius: 6px;
            margin-right: 10px;
        }
        
        .chat-title {
            font-weight: 600;
        }
        
        .chat-content {
            height: calc(100% - 50px);
            overflow-y: auto;
        }
        
        .message {
            padding: 0.8rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            max-width: 80%;
        }
        
        .user-message {
            background-color: #f1f1f1;
            align-self: flex-end;
            margin-left: auto;
            animation: fadeIn var(--animation-speed) ease-out forwards;
        }
        
        .ai-message {
            background-color: #f9f9f9;
            border: 1px solid #eee;
            animation: fadeIn var(--animation-speed) ease-out forwards;
            display: none;
        }
        
        .cursor {
            display: inline-block;
            width: 10px;
            height: 20px;
            background-color: #333;
            animation: blink 1s infinite;
        }
        
        .thinking-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .thinking-dot {
            width: 8px;
            height: 8px;
            background-color: #888;
            border-radius: 50%;
            margin-right: 4px;
            animation: thinking 1.4s infinite ease-in-out;
        }
        
        .thinking-dot:nth-child(1) {
            animation-delay: 0s;
        }
        
        .thinking-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .thinking-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        .api-connection {
            display: none;
            background-color: #f5f5f5;
            border-radius: 5px;
            padding: 0.8rem;
            margin-bottom: 1rem;
            font-family: monospace;
            font-size: 0.9rem;
            color: #555;
        }
        
        .api-connection pre {
            margin: 0;
            white-space: pre-wrap;
        }
        
        .share-section {
            margin-top: 2rem;
        }
        
        .share-url {
            padding: 0.8rem;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 100%;
            margin-bottom: 1rem;
            display: none;
        }
        
        .copy-button {
            background-color: #555;
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: none;
        }
        
        .copy-button:hover {
            background-color: #444;
        }
        
        .footer {
            margin-top: 3rem;
            color: #777;
            font-size: 0.9rem;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes thinking {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.5); opacity: 1; }
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .search-box {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Let Me ChatGPT That For You</h1>
        <p class="subtitle">For when your friends need a little help with obvious questions</p>
        
        <div class="search-container">
            <input type="text" id="searchInput" class="search-box" placeholder="Type a simple question..." autofocus>
            <button id="searchButton" class="search-button">Generate Link</button>
        </div>
        
        <div id="chatSimulation" class="chat-container">
            <div class="chat-header">
                <div class="chat-logo"></div>
                <div class="chat-title" id="chatTitle">ChatGPT</div>
            </div>
            <div class="chat-content" id="chatContent">
                <!-- Messages will be added here -->
            </div>
        </div>
        
        <div class="share-section">
            <input type="text" id="shareUrl" class="share-url" readonly>
            <button id="copyButton" class="copy-button">Copy Link</button>
        </div>
        
        <div class="footer">
            <p>Inspired by "Let Me Google That For You" | Not affiliated with OpenAI</p>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const chatSimulation = document.getElementById('chatSimulation');
            const chatContent = document.getElementById('chatContent');
            const shareUrl = document.getElementById('shareUrl');
            const copyButton = document.getElementById('copyButton');
            
            // The URL of your serverless function - update this to your domain
            const API_ENDPOINT = 'https://lmchatgptfy.com/api/llm';
            
            // Check if there are query parameters
            const urlParams = new URLSearchParams(window.location.search);
            const queryParam = urlParams.get('q');
            
            if (queryParam) {
                // We're in demo mode
                searchInput.value = decodeURIComponent(queryParam);
                setTimeout(() => {
                    startSimulation(searchInput.value);
                }, 1000);
            }
            
            searchButton.addEventListener('click', function() {
                const query = searchInput.value.trim();
                if (query) {
                    // Generate and show the URL
                    const currentUrl = window.location.href.split('?')[0];
                    const newUrl = `${currentUrl}?q=${encodeURIComponent(query)}`;
                    shareUrl.value = newUrl;
                    shareUrl.style.display = 'block';
                    copyButton.style.display = 'inline-block';
                }
            });
            
            copyButton.addEventListener('click', function() {
                shareUrl.select();
                document.execCommand('copy');
                copyButton.textContent = 'Copied!';
                setTimeout(() => {
                    copyButton.textContent = 'Copy Link';
                }, 2000);
            });
            
            async function startSimulation(question) {
                chatSimulation.style.display = 'block';
                
                // Add user message
                setTimeout(() => {
                    const userMessage = document.createElement('div');
                    userMessage.className = 'message user-message';
                    userMessage.textContent = question;
                    chatContent.appendChild(userMessage);
                    
                    // Show API connection simulation
                    setTimeout(() => {
                        const apiConnection = document.createElement('div');
                        apiConnection.className = 'api-connection';
                        
                        apiConnection.innerHTML = `<pre>Connecting to OpenAI API...
Sending request with model: gpt-3.5-turbo
Question: "${escapeHTML(question)}"</pre>`;
                        
                        chatContent.appendChild(apiConnection);
                        apiConnection.style.display = 'block';
                        
                        // Show "thinking" indicator
                        setTimeout(() => {
                            const thinkingIndicator = document.createElement('div');
                            thinkingIndicator.className = 'thinking-indicator';
                            thinkingIndicator.innerHTML = `
                                <div class="thinking-dot"></div>
                                <div class="thinking-dot"></div>
                                <div class="thinking-dot"></div>
                            `;
                            chatContent.appendChild(thinkingIndicator);
                            
                            // Prepare to call the actual API through our serverless function
                            const requestData = {
                                question: question
                            };
                            
                            // Make the actual API call
                            fetch(API_ENDPOINT, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify(requestData),
                            })
                            .then(response => response.json())
                            .then(data => {
                                // Remove thinking indicator
                                chatContent.removeChild(thinkingIndicator);
                                
                                // Add AI message
                                const aiMessage = document.createElement('div');
                                aiMessage.className = 'message ai-message';
                                aiMessage.style.display = 'block';
                                aiMessage.innerHTML = '<span class="cursor"></span>';
                                chatContent.appendChild(aiMessage);
                                
                                typeResponse(aiMessage, data.response);
                            })
                            .catch(error => {
                                // Remove thinking indicator
                                chatContent.removeChild(thinkingIndicator);
                                
                                // If API call fails, use fallback responses
                                console.error('Error:', error);
                                const fallbackResponse = generateFallbackResponse(question);
                                
                                // Add AI message with fallback
                                const aiMessage = document.createElement('div');
                                aiMessage.className = 'message ai-message';
                                aiMessage.style.display = 'block';
                                aiMessage.innerHTML = '<span class="cursor"></span>';
                                chatContent.appendChild(aiMessage);
                                
                                typeResponse(aiMessage, fallbackResponse);
                            });
                        }, 1000);
                    }, 1000);
                }, 1000);
            }
            
            function typeResponse(element, text, index = 0) {
                if (index < text.length) {
                    // Variable typing speed for more realism
                    const isEndOfSentence = text.charAt(index - 1) === '.' || 
                                           text.charAt(index - 1) === '?' || 
                                           text.charAt(index - 1) === '!';
                    const isPunctuation = [',', ';', ':'].includes(text.charAt(index - 1));
                    
                    let delay = Math.random() * 30 + 20; // Base typing speed
                    
                    if (isEndOfSentence) {
                        delay += 300; // Pause longer at end of sentences
                    } else if (isPunctuation) {
                        delay += 150; // Slight pause at punctuation
                    }
                    
                    element.innerHTML = text.substring(0, index + 1) + '<span class="cursor"></span>';
                    setTimeout(() => {
                        typeResponse(element, text, index + 1);
                    }, delay);
                } else {
                    element.innerHTML = text; // Remove cursor at the end
                }
            }
            
            function generateFallbackResponse(question) {
                // This function generates fallback responses if the API call fails
                question = question.toLowerCase();
                
                // Base response templates - can be expanded
                if (question.includes('weather')) {
                    return "You can check the current weather by looking out a window or using a weather app like AccuWeather or your phone's built-in weather app. For forecasts, these same resources provide predictions based on meteorological data.";
                } else if (question.includes('time')) {
                    return "You can check the current time by looking at your device's clock, which is typically displayed in the corner of your screen or on your phone's lock screen. Most devices automatically sync with global time servers for accuracy.";
                } else {
                    return "That's an interesting question. To find a comprehensive answer, I'd recommend researching this topic through reliable sources. You might start with a Google search, check relevant books or academic papers, or consult with experts in the field related to your question.";
                }
            }
            
            function escapeHTML(str) {
                return str
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#039;');
            }
        });
    </script>
</body>
</html>
